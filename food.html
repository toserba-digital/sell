<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Makanan Murah — Toserba Digital</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root {
    --bg: #eff0f3; --card:#fffffe; --text:#0d0d0d; 
    --border:#0d0d0d; --orange:#ff8e3c; --pink:#d9376e;
  }
  body { background: var(--bg); color: var(--text); padding-bottom:80px; }

  .brutal { border:3px solid var(--border); box-shadow:6px 6px 0 var(--border); }

  .pesan-btn {
    background: var(--orange)!important; color:#fffffe!important;
    border:3px solid var(--border)!important;
    font-weight:bold; box-shadow:4px 4px 0 var(--border)!important;
  }

  @keyframes pulseDuo {
    0% { transform:scale(1); background:var(--orange);}
    50% { transform:scale(1.08); background:var(--pink);}
    100% { transform:scale(1); background:var(--orange);}
  }
  .pulse { animation:pulseDuo 1.2s infinite ease-in-out; }

  footer {
    position:fixed; bottom:0; width:100%; background:var(--pink);
    color:white; text-align:center; padding:10px 0;
    border-top:3px solid var(--border); box-shadow:0 -4px 0 var(--border);
  }
</style>
</head>

<body>

<!-- NAVBAR -->
<div class="bg-[var(--pink)] text-white py-4 brutal">
  <nav class="max-w-6xl mx-auto px-5 flex justify-between items-center">
    <div>
      <h1 class="text-xl font-extrabold uppercase">TOSERBA DIGITAL</h1>
      <p class="text-[12px] uppercase opacity-90 -mt-1">MAKANAN MURAH</p>
    </div>

    <a href="index.html" class="brutal text-white px-3 py-2 font-bold text-sm pulse">
       APLIKASI PREMIUM
    </a>
  </nav>
</div>

<!-- SEARCH BAR -->
<div class="max-w-6xl mx-auto px-5 py-4 flex gap-3 flex-col sm:flex-row">
  <input id="search" class="brutal px-3 py-2 text-sm flex-1" placeholder="Cari makanan..." oninput="renderFood()">
  <select id="filterKategori" class="brutal px-3 py-2 text-sm w-full sm:w-52" onchange="renderFood()"></select>
</div>

<!-- PRODUK -->
<div id="produkList" class="max-w-6xl mx-auto px-5 py-6 grid grid-cols-2 md:grid-cols-3 gap-6"></div>

<script>
let produk = JSON.parse(localStorage.getItem("produk")) || [];
let kategoriList = JSON.parse(localStorage.getItem("kategoriList")) || [];

document.getElementById("filterKategori").innerHTML =
  "<option value=''>Semua</option>" +
  kategoriList.map(k => `<option>${k}</option>`).join("");

function renderFood(){
  const wrap=document.getElementById("produkList");
  wrap.innerHTML="";
  const s=document.getElementById("search").value.toLowerCase();

  produk.filter(p => p.kategori.toLowerCase()=="makanan" && p.nama.toLowerCase().includes(s))
  .forEach((p,i)=>{
    let foto=p.foto?`<img src="${p.foto}" class="w-full h-40 object-cover brutal mb-3">`:"";
    wrap.innerHTML+=`
      <div class="brutal bg-[var(--card)] p-3">
        ${foto}
        <h3 class="font-bold text-sm uppercase">${p.nama}</h3>
        <p class="text-xs mb-1">${p.deskripsi}</p>

        <select id="paket_${i}" class="brutal px-2 py-1 text-xs w-full">
          ${p.paket.map(pk=>`<option>${pk.nama} — Rp ${pk.harga}</option>`).join("")}
        </select>

        <button onclick="pesan('${p.nama}','paket_${i}')"
                class="brutal pesan-btn w-full mt-3 py-2 text-xs font-bold">
          PESAN
        </button>
      </div>
    `;
  });
}

function pesan(nama,id){
  const val=document.getElementById(id).value;
  window.open("https://wa.me/6287775787888?text="+encodeURIComponent(`Halo admin, saya mau pesan ${nama} (${val})`));
}

renderFood();
</script>

<footer class="brutal">Toserba Digital © 2025</footer>
</body>
</html>
